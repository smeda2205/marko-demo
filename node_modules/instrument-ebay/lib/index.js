'use strict';

var defaultWrappers = [ 'https', 'cookies', 'ep', 'tracking', 'outbound-context', 'oauth', 'error-handler', 'retry', 'config-bean', 'cache', 'cal'];
var soapWrappers = ['https', 'soap', 'error-handler', 'retry', 'config-bean', 'cache', 'cal'];

var Wrappers;
var instrumentInc;

module.exports.init = function init() {
    // trigget wrappers registration
    Wrappers = Wrappers || require('./service-wrappers');
    instrumentInc = instrumentInc || require('instrument-inc');
};

module.exports.instrument = function instrument(transport, moduleRef, wrappers) {
    module.exports.init();
    return instrumentInc.instrument(transport, moduleRef, wrappers || defaultWrappers);
};

module.exports.RuntimeError = require('./errors').RuntimeError;

module.exports.SoapInstruments = soapWrappers;
module.exports.DefaultInstruments = defaultWrappers;
