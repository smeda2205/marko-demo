'use strict';

module.exports.updateRequest = function updateRequest(request) {
    if (request.qs) {
        // adjust for from standard to ebay specific
        request.search = request.qs;
    }
    // handle legacy code to keep backward compatibility
    this.updateBody(request);
    if (request.basepath) {
        if (request.path) {
            request.path = (request.basepath + '/' + request.path).replace(/(\/)+/g, '/');
        }
        else {
            request.path = request.basepath;
        }
        delete request.basepath;
    }
    if (request.path && request.path.charAt(0) !== '/') {
        request.path = '/' + request.path;
    }
};

module.exports.updateBody = function updateBody(request) {
    // handle legacy code to keep backward compatibility
    if (request.body && request.body.body) {
        var body = request.body;
        Object.keys(body).forEach(function forEach(key) {
            request[key] = body[key];
        });
    }
};
