'use strict';

function formatNumber(val, length) {
    var txt = new Array(length).join('0') + val;
    return txt.substring(txt.length - length);
}

function formatEventTime(date) {
    return require('util').format('%s-%s-%s.%s:%s:%s.%s',
        formatNumber(date.getYear(), 2),
        formatNumber(date.getMonth() + 1, 2),
        formatNumber(date.getDate(), 2),
        formatNumber(date.getHours(), 2),
        formatNumber(date.getMinutes(), 2),
        formatNumber(date.getSeconds(), 2),
        formatNumber(date.getMilliseconds(), 3));
}

module.exports.formatEventTime = formatEventTime;

module.exports.humanize = function humanize(ms) {
    var sec = 1000,
    min = 60 * 1000,
    hour = 60 * min;

    if (ms >= hour) {
        return (ms / hour).toFixed(1) + 'h';
    }
    if (ms >= min) {
        return (ms / min).toFixed(1) + 'm';
    }
    if (ms >= sec) {
        return (ms / sec | 0) + 's';
    }
    return ms + 'ms';
};