#streams-ebay 
[![Build Status](https://ebayci.qa.ebay.com/CI-Instance/buildStatus/icon?job=streams-ebay)](https://ebayci.qa.ebay.com/CI-Instance/job/streams-ebay) [![Dependency Status](https://nodevalid-i3ey5.vip.lvs01.dev.ebayc3.com/nodejs/streams-ebay.svg)](https://nodevalid-i3ey5.vip.lvs01.dev.ebayc3.com/nodejs/streams-ebay)  [![Code Coverage](https://nodevalid-i3ey5.vip.lvs01.dev.ebayc3.com/coverage/nodejs/streams-ebay)](http://sonar/dashboard/index?id=streams-ebay)


A module to handle the HTTP Response Streams on Progressive and Chunked Responses.  This module provides three different streams

1. Chunked Stream
2. Json Stream
3. SSE Event stream

## Changelog

See   [CHANGELOG.MD](https://github.corp.ebay.com/nodejs/streams-ebay/blob/master/CHANGELOG.md#changelog)

# Installation

`npm install streams-ebay --save`

# Usage

## Chunked Stream

```
npm install streams-ebay --save

var streams = require('streams-ebay');
var chunked = streams.ChunkedStream;
var stream = new chunked();

/** Pipe the stream to request ***/

req.pipe(chunked_stream);
```

## Chunked JSON Stream

```
npm install streams-ebay --save

var streams = require('streams-ebay');

var chunked = streams.ChunkedStream;
var jsonStream = streams.JsonStream;
var stream = new chunked();
var jsonParts = new jsonStream();
stream.pipe(jsonParts);


/** Pipe the stream to request ***/
jsonParts.on('object', function(result){
console.info('Data Is ' , result);
});
req.pipe(stream);
```

## Chunked Events Stream

```
npm install streams-ebay --save

var streams = require('streams-ebay');

var chunked = streams.ChunkedStream;
var eventStream = streams.EventStream;
var stream = new chunked();
var eventParts = new eventStream();
stream.pipe(eventParts);

/** Pipe the stream to request ***/

eventParts.on('data', function(result){
    console.info('Data Is ' , result);
});

req.pipe(stream);
```

## Streams Adaptor
`Streams Adaptor` provides an simple and elegant option to bind streams.  **Streams Adaptor** is a standard `EventEmitter` emits following events when the data stream is generated.
- `data` - `data` event is emitted when the `stream` generates a data event.
- `error` - `error` event is emitted when the stream received is an error. **Error** event emits **End** event subsequently.
- `end` - `end` event is emitted when the stream is complete.

### Example

```Javascript
var adaptor = require('streams-ebay/Adaptor').Adaptor;
var streamsAdaptor = new adaptor();
var provider = require('service-client-ebay').getClient('streams');

/**Listen for Data events **/

streamsAdaptor.on('data', function(data){
    console.log(data);
});
streamsAdaptor.on('error', function(err){
    console.log(err);
});
streamsAdaptor.on('end', function(){
    console.log('Stream end');
});
provider.get().end(streamsAdaptor.handle());
```
