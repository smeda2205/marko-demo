'use strict';

var util = require('util');
var Transform = require('stream').Transform;

var JsonStream = module.exports.JsonStream = function JsonStream() {
    Transform.call(this);
};

util.inherits(JsonStream, Transform);

JsonStream.prototype._transform = function(chunk, encoding, callback) {
    try {
        var obj = JSON.parse(chunk.toString('utf-8'));
        this.emit('object', obj);
        callback(null);
    } catch (err) {
        callback(err);
    }

};