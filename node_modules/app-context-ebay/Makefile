REPORTER = spec

BASE = .

ISTANBUL = ./node_modules/.bin/istanbul

JSHINT = ./node_modules/.bin/jshint

all: lint test

test:
	@NODE_ENV=test ./node_modules/.bin/mocha \
		--reporter $(REPORTER) --timeout 15000

lint:
	$(JSHINT) ./index.js --config $(BASE)/.jshintrc && \
	$(JSHINT) ./test --config $(BASE)/.jshintrc

cover:
	rm -rf ./coverage && \
	$(ISTANBUL) cover ./node_modules/.bin/_mocha -- -u exports -R spec test/*.js

coverreport:
	open ./coverage/lcov-report/index.html

.PHONY: test docs
