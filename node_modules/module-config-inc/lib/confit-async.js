'use strict';

var path = require('path'),
    utils = require('./utils');

module.exports = function config(moduleRef, callback) {
    var modRoot = utils.moduleRoot(moduleRef);
    var appConfigRoot = path.resolve(process.cwd(), 'config');
    var moduleConfigRoot = path.resolve(modRoot, 'config');

    utils.loadModuleConfig({
        appConfigRoot: appConfigRoot,
        moduleConfigRoot: moduleConfigRoot,
        modRoot: modRoot,
        asyncMode: true
    }, callback);
};
