# marko-context-ebay

Get context objects (`req`, `res`, `req.ebay`) from the marko render context.

## Methods

### `getRequest`

Get the http request object (`req`).

### `getResponse`

Get the http response object (`res`).

### `getEbay`

Get the ebay object (`req.ebay`).

## How to use

In a Custom Marko Tag, pass `out` to one of the provided methods to get an object from the request context.  This has a number of fallbacks to support different methods of passing the request context to marko.

```js
var { getRequest } = require('marko-request-context');

module.exports = function(input, out) {
   var req = getRequest(out);
   // ...
}
```

## Covered use cases

When rendering, there are a number of different ways the user could be rendering a template.  The following are covered cases for getting the request context into Marko.

```js
// using res.marko from `marko/express`
// this sets out.global.res and out.global.req
res.marko(template, data);

// rendering directly to the http response
// this sets out.stream to res
// in express, req is out.stream.req
// https://github.com/expressjs/express/blob/351396/lib/middleware/init.js#L32
template.render(data, res);

// setting only out.global.res or out.global.req (express)
// in express, res is req.res and req is res.req
// https://github.com/expressjs/express/blob/351396/lib/middleware/init.js#L31-L32
template.stream(Object.assign({ $global:{ res } }, data));
template.stream(Object.assign({ $global:{ req } }, data));

// no req/res passed
// requires request-local middleware
template.stream(data);
```