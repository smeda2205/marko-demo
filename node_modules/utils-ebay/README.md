# utils-ebay
[![Dependency Status](https://nodevalid-i3ey5.vip.lvs01.dev.ebayc3.com/nodejs/utils-ebay.svg)](https://nodevalid-i3ey5.vip.lvs01.dev.ebayc3.com/nodejs/utils-ebay)  [![Code Coverage](https://nodevalid-i3ey5.vip.lvs01.dev.ebayc3.com/coverage/nodejs/utils-ebay)](http://sonar/dashboard/index?id=utils-ebay)

Small collection of Utility / Helper Methods attributed to Request , Response Flow

## Changelog

See   [CHANGELOG.MD](https://github.corp.ebay.com/nodejs/utils-ebay/blob/master/CHANGELOG.md#changelog)

# Installation

`npm install utils-ebay --save`

# Usage

```javascript
var utils = require('utils-ebay');

/** Get Base Host by Request Url ***/

console.log(utils.getBaseHost('www.ebay.de')) /*** Will return ebay.de **/

```

# API

## Request API's
* **getRemoteAddr(req)**
    Returns Remote IP address of caller retreived from request headers `x-ebay-client-ip` or `x-forwarded-for` or `req.ip`

    ```javascript
    console.log(utils.getRemoteAddr(req)) /*** Will return client IP address e.g 127.0.0.1 **/

    ```
* **getClientIP(req)**
    Returns client IP address retreived from request headers `x-forwarded-for` or `req.ip`

    ```javascript
    console.log(utils.getClientIP(req)) /*** Will return client IP address e.g 127.0.0.1 **/

    ```    
* **isIPFromAkamaiHeader(req)**
    Reads client IP address from `x-ebay-akamai-9` and  validate if the IP is from Akamai header or not

    ```javascript
    console.log(utils.isIPFromAkamaiHeader(req)) /*** Will return true/false**/

    ```    
* **getServerName(req)**
    Returns Server Name e.g `localhost` or `127.0.0.1` retreived from request headers `host`
    ```javascript
    console.log(utils.getServerName(req)) /*** Will return server name e.g qa.ebay.com or localhost or 127.0.0.1 **/

    ```

### GetBaseHost by Request URL :

This `function` returns the baseHost from the given url.

#### Example 1:

```javascript
console.log(utils.getBaseHost('www.ebay.de')) /*** Will return ebay.de **/

```

### Get PageNot Responding Url by Request URL :

This `function` returns the baseHost from the given url.

#### Example2 :

```javascript

var url = utils.getPageNotRespondingUrl('www.ebay.paradise.co.uk');
console.log(url); /** Will print url value : 'http://pages.ebay.paradise.co.uk/messages/page_not_responding.html' **/

```
