'use strict';

var cal = require('cal');
var EventEmitter = require('events').EventEmitter;

cal.setDefaultWriteStream('console');

function CALEventCatcher(capture) {
    var self = this;
    this.events = [];

    var listener = function (event) {
        var evt = capture(event);
        evt && self.events.push(evt);
    };
    process.on('cal-event-args', listener);

    this.reset = function () {
        process.removeListeners('cal-event-args', listener);
    };
}


module.exports = CALEventCatcher;
