# ChangeLog

## v4.0.2
* Set Page Id to attributes to strings that currently having a module ID and a link ID

## v4.0.1
* Added amp support

## v4.0.0
* Upgrade to 4.x version of dependencies.

## v0.5,2
* Decoupled marko-v2 (now used for template generation) from marko-v3/4.
* Fixed: Should fallback to a generic version when given permutation does not exists for header and footer https://github.corp.ebay.com/nodejs/global-header-ebay/issues/63
* Added retry logic to make sure all fallback headers/footers loaded during generation phase.

## v0.5.1
* Fixed: Disabled cold cache that is causing increase in CPU usage as well as increase in disk usage due to raptor-cache/DiskStorage. TODO: need to replace it with simple file storage. Till then it will stay disabled.

## v0.5.0
* Added resiliency per https://jirap.corp.ebay.com/browse/NODE-402
  * Added cold cache
  * Added fallback to static version in production
* Upgraded service client to 1.x

## v0.4.3
* FLXBRW-308 -  Global Header Node adapter update for category/refinedCategory display

## v0.4.1
* Moved httpunch to direct dependencies as it is used during generation of fallback headers/footers in CI job

## v0.4.0
* Added postinstall script to auto-generate header/footer permutations out of static GH resources

## v0.3.32
* Adding changes to remove the !important selector and _sp custom attribute

## v0.3.31
* Added one more backup cache fallback when html parsing fails

## v0.3.30
* Fixed: global header crashes the worker whenever template is invalid, https://jirap.corp.ebay.com/browse/KERNEL-2933
* Fixed: should validate header template rendering before putting into cache.
* Added nonce support in script tag form GlobalHeader Service
* CSP nonce support added

## v0.3.28
* Fixed failing test for Node 4.x

## v0.3.27
* Change service call params app=NODE so that service can distingish the platform
* remove EP call

## v0.3.26
* Added preload function for EP and PDS header attributes. It now can be configured in routes.json file per route as:
```json
{
    "path": "GET /sch/i.html",
    "handler": "require:src/pages/index",
    "pagename": "srpnweb",
    "global-header": {
        "preload": true
    }
}
```

## v0.3.25

* Fixed [Issue #25](https://github.corp.ebay.com/nodejs/global-header-ebay/issues/25) - Force flush when global header completes and renders so that progressive HTML rendering works as expected.

## v0.3.23
* Upgraded to Marko 2.x

## v0.3.22
* add `preload` option to GH config. This allows the applications to call the PDS & EP calls async, with out waiting up to the rendering time.

## v0.3.21
* add recognize flag (sin=2) for recognize user and add new parameter in GH_config user firstname (fn) and userID (id)
* add check for BUSINESS_ROLE_GUEST_SESSION and clean up
* add footer params ex. secure factor etc.
* add xstage for pool params

## v0.3.20
* Fixed cache max age, it is now 30 mins.

## v0.3.20
* Fixed memory leak caused by require new template whenever GH is refreshed.

## v0.3.19
* Changed service call to service-client-ebay
* Logging additional EP data to CAL as per [#issue-9](https://github.corp.ebay.com/nodejs/global-header-ebay/issues/9)
* Fixed test

## v0.3.18
* fix callback attribute for pds-ebay getAttribute to expect data as value not key value
