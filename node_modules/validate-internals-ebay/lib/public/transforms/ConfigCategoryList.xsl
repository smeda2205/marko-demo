<?xml version="1.0" encoding="UTF-8"?>
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
<xsl:output method="html"/>

<xsl:include href='PageLayout.xsl'/>

<xsl:template match="/">
    <xsl:call-template name='page-layout'>
        <xsl:with-param name='root-node' select="ConfigCategoryList"/>
        <xsl:with-param name='title-text' select="'View Configuration Category List'"/>
    </xsl:call-template>
</xsl:template>

<xsl:template name='page-content'>
    <div class="page_nav"><div>View by</div>
    <ul>
        <li><a link="none" href="ViewConfigBeanList">Bean</a></li>
        <li><a link="none" href="ViewConfigCategoryList?view=layer">Layer</a></li>
        <li><a link="none" href="ViewConfigCategoryList?view=group">Group</a></li>
        <li><a link="none" href="ViewConfigCategoryList?view=siteop">Managed By Site Operations</a></li>
    </ul>
    </div>

    <xsl:variable name="view-by">
        <xsl:choose>
            <xsl:when test="ConfigCategoryList/@view = 'layer'">Layer</xsl:when>
            <xsl:when test="ConfigCategoryList/@view = 'group'">Group</xsl:when>
            <xsl:when test="ConfigCategoryList/@view = 'siteop'">Managed&#160;By&#160;Site&#160;Operations</xsl:when>
            <xsl:otherwise>Unknown</xsl:otherwise>
        </xsl:choose>
    </xsl:variable>
    <div class="table_title" id="categoryListTableId_title">Configuration Categories (View by: <xsl:value-of select="$view-by"/>)</div>
    <table id="categoryListTableId" class="display">
       <thead>
        <tr>
            <th class="left"><xsl:value-of select="$view-by"/></th>
            <th class="left" style="width: 50%;">Bean</th>
        </tr>
        </thead>
        <xsl:apply-templates select="ConfigCategoryList/ConfigCategoryGroup"/>
    </table>
</xsl:template>
  <!--******************************************************
    ** "ConfigCategoryGroup" template
    ***************************************************-->
<xsl:template match="ConfigCategoryGroup">
<xsl:variable name="category" select="@name"/>
<xsl:for-each select="ConfigCategory">
    <tr>
        <td><xsl:value-of select="$category"/></td>
        <td><a href="ViewConfigCategoryXml?id={@id}"><xsl:value-of select="@id"/></a></td>
    </tr>
</xsl:for-each>
</xsl:template>
</xsl:stylesheet>

